Процедура СформироватьОтчет(Команда)

    // Получаем параметры
    Группа = ЭлементыФормы.Группа.Значение;
    НачДата = ЭлементыФормы.НачальнаяДата.Значение;
    КонДата = ЭлементыФормы.КонечнаяДата.Значение;

    Если Не ЗначениеЗаполнено(Группа) Тогда
        Сообщить("Не выбрана группа");
        Возврат;
    КонецЕсли;

    Запрос = Новый Запрос;
    Запрос.Текст =
    "ВЫБРАТЬ
        Студенты.Ссылка КАК Студент,
        Студенты.ФИО КАК ФИО,
        Успеваемость.Дисциплина КАК Дисциплина,
        СРЕДНЕЕ(Успеваемость.Оценка) КАК СредняяОценка
     ИЗ
        РегистрНакопления.Успеваемость КАК Успеваемость
        ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Студенты КАК Студенты
        ПО Успеваемость.Студент = Студенты.Ссылка
     ГДЕ
        Студенты.Группа = &Группа
        И Успеваемость.Период МЕЖДУ &НачДата И &КонДата
     СГРУППИРОВАТЬ ПО
        Студенты.Ссылка,
        Студенты.ФИО,
        Успеваемость.Дисциплина
     УПОРЯДОЧИТЬ ПО
        Студенты.ФИО";

    Запрос.УстановитьПараметр("Группа", Группа);
    Запрос.УстановитьПараметр("НачДата", НачДата);
    Запрос.УстановитьПараметр("КонДата", КонДата);

    Результат = Запрос.Выполнить();
    Таблица = Результат.Выгрузить();

    // Отображаем в форме
    ЭлементыФормы.ПолеТаблицы.Значение = Таблица;

КонецПроцедуры
